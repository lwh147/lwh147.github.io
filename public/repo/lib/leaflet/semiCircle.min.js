(function(a){if(typeof define==="function"&&define.amd){define(["leaflet"],a)}else{if(typeof module!=="undefined"&&typeof require!=="undefined"){module.exports=a(require("leaflet"))}else{if(typeof window.L==="undefined"){throw"Leaflet must be loaded first"}a(window.L)}}})(function(a){var c=Math.PI/180;function b(h){return(h-90)*c}function e(i,j,h){return i.add(a.point(Math.cos(j),Math.sin(j)).multiplyBy(h))}a.Point.prototype.rotated=function(i,h){return e(this,i,h)};var d={options:{startAngle:0,stopAngle:359.9999},startAngle:function(){if(this.options.startAngle<this.options.stopAngle){return b(this.options.startAngle)}else{return b(this.options.stopAngle)}},stopAngle:function(){if(this.options.startAngle<this.options.stopAngle){return b(this.options.stopAngle)}else{return b(this.options.startAngle)}},setStartAngle:function(h){this.options.startAngle=h;return this.redraw()},setStopAngle:function(h){this.options.stopAngle=h;return this.redraw()},setDirection:function(h,i){if(i===undefined){i=10}this.options.startAngle=h-(i/2);this.options.stopAngle=h+(i/2);return this.redraw()},getDirection:function(){return this.stopAngle()-(this.stopAngle()-this.startAngle())/2},isSemicircle:function(){var h=this.options.startAngle,i=this.options.stopAngle;return(!(h===0&&i>359)&&!(h===i))},_containsPoint:function(k){function i(m){while(m<=-Math.PI){m+=2*Math.PI}while(m>Math.PI){m-=2*Math.PI}return m}var l=Math.atan2(k.y-this._point.y,k.x-this._point.x);var j=i(this.startAngle());var h=i(this.stopAngle());if(h<=j){h+=2*Math.PI}if(l<=j){l+=2*Math.PI}return(j<l&&l<=h&&k.distanceTo(this._point)<=this._radius+this._clickTolerance())}};a.SemiCircle=a.Circle.extend(d);a.SemiCircleMarker=a.CircleMarker.extend(d);a.semiCircle=function(i,h){return new a.SemiCircle(i,h)};a.semiCircleMarker=function(i,h){return new a.SemiCircleMarker(i,h)};var f=a.SVG.prototype._updateCircle;var g=a.Canvas.prototype._updateCircle;a.SVG.include({_updateCircle:function(j){if(!(j instanceof a.SemiCircle||j instanceof a.SemiCircleMarker)||!j.isSemicircle()){return f.call(this,j)}if(j._empty()){return this._setPath(j,"M0 0")}var m=j._map.latLngToLayerPoint(j._latlng),k=j._radius,i=Math.round(j._radiusY||k),o=m.rotated(j.startAngle(),k),h=m.rotated(j.stopAngle(),k);var l=(j.options.stopAngle-j.options.startAngle>=180)?"1":"0";var n="M"+m.x+","+m.y+"L"+o.x+","+o.y+"A "+k+","+i+",0,"+l+",1,"+h.x+","+h.y+" z";this._setPath(j,n)}});a.Canvas.include({_updateCircle:function(i){if(!(i instanceof a.SemiCircle||i instanceof a.SemiCircleMarker)||!i.isSemicircle()){return g.call(this,i)}if(!this._drawing||i._empty()){return}var l=i._point,h=this._ctx,k=i._radius,j=(i._radiusY||k)/k,m=l.rotated(i.startAngle(),k);if(j!==1){h.save();h.scale(1,j)}h.beginPath();h.moveTo(l.x,l.y);h.lineTo(m.x,m.y);h.arc(l.x,l.y,k,i.startAngle(),i.stopAngle());h.lineTo(l.x,l.y);if(j!==1){h.restore()}this._fillStroke(h,i)}})});