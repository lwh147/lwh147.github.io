# 各模块功能

## cache-starter JetCache缓存配置

该部分对JetCache主要做了以下配置

* 使用JedisPool连接池对连接线程进行管理
* 使用hashmap作为本地缓存，redis作为远程缓存
* 两者使用的键序列化工具都是fastjson
* 配置redis使用自定义编码和解码序列化策略对value进行压缩存储，提升性能
* 为了避免对value进行解码时无法强转成指定类型对象的异常，定义了JsonCacheObject类对需要进行编码的value对象做了进一步封装，存储了value的类型

## code-generator 代码生成器配置

该部分主要对mybatisplus的代码生成器配置工作进行了封装，简化了配置工作，包括自定义了生成controller、service、entity、mapper时使用的模板引擎

## common-core 公共开发核心组件

* constants
  对公共常量进行了定义
* enums
  对异常提示类型进行了枚举，分为五种提示类型
* exception
  对公共错误类型进行了枚举并统一了异常对象
* model
  对一些公共model进行了统一，比如分页信息请求对象、分页信息响应对象、响应结构对象等
* utils
  封装了一些开发过程中常用的工具类，如Bean操作工具类、日期时间操作工具类、Json序列化工具类、字符串操作工具类等

## easypoi-starter Excel操作工具库easypoi的配置

将**Excel的相关操作**过程中使用到的一些方法进行了封装，形成了ExcelBuilder工具类，简化了后端对Excel文档的相关操作逻辑

## job-starter 定时任务支持

对定时任务的一些配置进行了封装，简化了定时任务的配置

## mybatisplus-starter mybaitsplus配置

对mybatisplus进行了相关的自定义配置：

* 自定义主键生成策略，基于雪花算法进一步定制生成策略
* 对扫描通用枚举类进行了配置
* 对分页插件进行了相关的自定义配置，开启了count的join优化
* 对mybatisplus内置的mapper、service、entity父类进行了扩展和自定义

## client-starter 

最新企业级微服务开发整合框架nepxion的客户端启动入口配置模块

## gateway-starter

最新企业级微服务开发整合框架nepxion的网关启动入口配置模块

## redis-starter redis配置

对redisTemplate重新进行了配置，对缓存管理器进行了配置：

* 配置缓存默认有效期为24小时
* 将redisTemplate重新封装为redisUtils

## stream-starter 消息配置

对spring提供的MessageBuilder进一步封装成为MessageHelper，主要是加入了日志记录

## swagger-starter swagger配置

对swagger进行了配置

* 将swagger的相关配置规则映射到.properties文件中进行配置
* 采用条件注解可以规定默认配置生效的条件，这样也可以让使用者自己重新进行配置而不用必须使用默认配置

## web-starter web配置

配置了项目基础的一些拦截器、过滤器以及统一了异常处理：

* 通过@RestControllerAdvice注解可以实现在响应之前打印相应内容做日志记录
* 对feign调用时的请求头信息进行了补充，添加原始请求头中的一些信息
* 通过拦截器实现了所有请求的拦截以及请求信息打印的日志记录
* 设计了异常类型转换器接口并通过单例模式设计了一个存放了所有异常类型类的类型转换池，完成了异常的统一
* 自定义了Feign调用出错时调用的ErrorDecoder用于捕获 Feign 服务端异常
 

# 一些新的注解

## `@Conditional`

```java
@Target({ElementType.TYPE, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface Conditional {
    // 条件判断类列表
    Class<? extends Condition>[] value();
}
```

条件注解，传入一个或多个实现了Condition接口中matchs方法的类，只有当所有传入类的matches方法返回为true时加载Bean

## `@ConditionalOnProperty`

```java
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.TYPE, ElementType.METHOD})
@Documented
@Conditional({OnPropertyCondition.class})
public @interface ConditionalOnProperty {
    // 配置项的值列表
    String[] value() default {};
    // 配置项前缀
    String prefix() default "";
    // 配置项的名称列表
    String[] name() default {};
    // 单个配置项所具有的值
    String havingValue() default "";
    // 当找不到目标配置项时的加载策略
    boolean matchIfMissing() default false;
}
```

条件注解，当配置项中的配置满足条件时加载Bean

## `@ConditionOnMissingBean`

```java
@Target({ElementType.TYPE, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Conditional({OnClassCondition.class})
public @interface ConditionalOnClass {
    // 类型列表
    Class<?>[] value() default {};
    // 类名列表
    String[] name() default {};
}
```

也是一个条件注解，当spring容器中找不到指定类型或者指定名称的Bean时加载Bean

## `@ConditionalOnBean`

条件注解，当spring容器中存在指定Bean时加载Bean

## `@EnableConfigurationProperties`

在properties文件中自定义配置规则，需要传入定义了配置项以及配置项类型的javaBean

# Nepxion

## 是什么?

Discovery【探索】微服务框架，基于Spring Cloud & Spring Cloud Alibaba，Discovery服务注册发现、Ribbon & Spring Cloud LoadBalancer负载均衡、Feign & RestTemplate & WebClient调用、Spring Cloud Gateway & Zuul过滤等组件全方位增强的企业级微服务开源解决方案，更贴近企业级需求，更具有企业级的插件引入、开箱即用特征

> 有待进一步学习